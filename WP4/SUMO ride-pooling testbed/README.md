# SUMO ride-pooling testbed

## General description

This repository contains scripts for calculating the metrics for SUMO ride-pooling algorithms, performing batched experiments for the range of parameters, aggregating and visualizing the results. 

Two scenarios are considered: (i) baseline – all trips are served by private cars, (ii) ride-pooling – a given percentage of trips is served by ride-pooling service, other trips represent background traffic.

To study different combinations of supply and demand, we vary the following parameters of a ride-pooling scenario: (i) *percPass* – a percentage of trips which are served with the ride-pooling service, (ii) *percTaxi* – percentage of taxis related to the number of passengers (e.g. if *percTaxi*=20%, and the number of passengers is equal to 100, 20 taxis will be available for ride-pooling), (iii) *capacity* – the maximum occupancy of a taxi (the same as the maximum number of passengers sharing the ride).

Three groups of metrics are supported:
1. Passenger satisfaction measures
   * passenger waiting time;
   * detour time/distance (compared to baseline scenario);
   * detour time/distance percentage (compared to baseline scenario);
   * taxi travel time (waiting time + travel time);
   * taxi-private coefficient. Calculated as (t_taxi - t_private)/t_private * 100.
2. Taxi fleet usage measures
    * % of used taxis;
    * average number of customers;
    * occupied/idle time/distance of a taxi;
    * idle time/distance ratio - fraction of idle time/distance from total time/distance of a taxi;
    * occupancy rate - average number of passengers for occupied legs of a trip.
5. Emission measures - total emissions of CO_2, CO, HC, NO_x, PM_x, fuel, % of advantage compared to baseline scenario.

## Content
1. SUMO simulation input files:
   * randgrid.net.xml - road network file.
   * parkingareas.add.xml - file with parking areas. It is necessary for single lane roads, otherwise taxi will block the road while waiting for passengers or during pick-up and drop-off.
   * randgridonlyprivate.sumocfg, randgrid.sumocfg - SUMO configuration files for baseline and ride-pooling scenarios, respectively.
   * randgrid.trips.xml - trip file generated by randomTrips tool (demand)
   * sumoview.xml - visualization settings for SUMO GUI.
   * randgridonlyprivate.rou.xml, randgridmixed.rou.xml - route files. For ride-pooling scenarios, contain also trips for taxis (which will be replaced by dispatching algorithm during simulation).
2. Testbed scripts:
   * traciLaunch.py - external ride-pooling algorithm which is launched via TraCI interface. Here contains the implementation of maxOccupancy algorithm (selects the taxi with minimum pick-up distance which still has free seats).
   * 
